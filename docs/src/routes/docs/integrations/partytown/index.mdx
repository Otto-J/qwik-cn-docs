---
title: Partytown | 集成
keywords: '第三方脚本, 谷歌分析, 第三方, 脚本, 性能'
contributors:
  - manucorporat
  - leifermendez
  - shairez
  - pamenary
  - reemardelarosa
  - mhevery
---

# Partytown

第三方脚本会通过阻塞主线程大大减慢初始页面加载速度。

Partytown 是一个工具，通过使用 Web Worker 来延迟加载第三方脚本，如谷歌分析、Facebook 像素等，从而减少对主线程的影响。
有关该工具的更多信息，请访问 [Partytown 文档](https://partytown.builder.io/)。

## 使用方法

您可以通过使用以下 Qwik 起始脚本轻松添加 Partytown：

```shell
npm run qwik add partytown
```

上述命令会更新您的应用程序，并在 `vite.config.ts` 中设置正确的配置。

它还会向您的 `components` 文件夹添加新文件。

```tsx title="src/root.tsx"
import { QwikPartytown } from './components/partytown/partytown';

export default component$(() => {
  return (
    <QwikCityProvider>
      <head>
        <meta charSet="utf-8" />
        <QwikPartytown forward={['dataLayer.push']} />
        <script
          async
          type="text/partytown"
          src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXX"
        />
      </head>
      <body lang="en"></body>
    </QwikCityProvider>
  );
});
```

## 高级配置

要进一步配置 Partytown 的更多选项，请访问 [Partytown 文档](https://partytown.builder.io/configuration)。
