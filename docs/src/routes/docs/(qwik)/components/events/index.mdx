---
title: äº‹ä»¶ | Components
contributors:
  - voluntadpear
  - the-r3aper7
  - RATIU5
  - manucorporat
  - nnelgxorz
  - adamdbradley
  - hamatoyogi
  - fleish80
  - cunzaizhuyi
  - Pika-Pool
  - mhevery
  - AnthonyPAlicea
  - amatiash
  - harishkrishnan24
  - fabian-hiller
  - igorbabko
  - mrhoodz
  - julianobrasil
  - maiieul
  - Balastrong
  - Jemsco
updated_at: '2024-01-09T20:55:11Z'
created_at: '2023-03-20T23:45:13Z'
---

import CodeSandbox from '../../../../../components/code-sandbox/index.tsx';

# äº‹ä»¶

è¦ä½¿ Web åº”ç”¨ç¨‹åºå…·æœ‰äº¤äº’æ€§ï¼Œéœ€è¦ä¸€ç§æ–¹å¼æ¥å“åº”ç”¨æˆ·äº‹ä»¶ã€‚è¿™æ˜¯é€šè¿‡åœ¨ JSX æ¨¡æ¿ä¸­æ³¨å†Œå›è°ƒå‡½æ•°æ¥å®Œæˆçš„ã€‚äº‹ä»¶å¤„ç†ç¨‹åºæ˜¯ä½¿ç”¨ `on{EventName}$` å±æ€§æ³¨å†Œçš„ã€‚ä¾‹å¦‚ï¼Œ`onClick$` å±æ€§ç”¨äºç›‘å¬ `click` äº‹ä»¶ã€‚

```tsx /onClick$/
<button onClick$={() => alert('CLICKED!')}>click me!</button>
```

## å†…é“¾äº‹ä»¶

åœ¨ä¸‹é¢çš„æ¡ˆä¾‹ï¼Œ`<button>` å…ƒç´ çš„ `onClick$` å±æ€§ç”¨äºå‘Šè¯‰ Qwikï¼Œæ¯å½“ `<button>` è§¦å‘ `click` äº‹ä»¶æ—¶ï¼Œéƒ½åº”æ‰§è¡Œå›è°ƒ `() => store.count++`ã€‚

<CodeSandbox src="/src/routes/demo/state/counter-signal/index.tsx" style={{ height: '6em' }}>
```tsx {7} /onClick$/
import { component$, useSignal } from '@builder.io/qwik';

export default component$(() => {
  const count = useSignal(0);

  return (
    <button onClick$={() => count.value++}>
      Increment {count.value}
    </button>
  );
});
```
</CodeSandbox>

ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ `bind:propertyName` æ¥æ–¹ä¾¿åœ°å®ç°ä¿¡å·å’Œè¾“å…¥å…ƒç´ ä¹‹é—´çš„[åŒå‘ç»‘å®š](/docs/(qwik)/components/rendering/index.mdx#bind-attribute)ã€‚

æ³¨æ„ `onClick$` ä»¥ [`$`](/docs/(qwik)/advanced/dollar/index.mdx) ç»“å°¾ã€‚è¿™æ—¢æ˜¯å¯¹ ä¼˜åŒ–å™¨ å’Œå¼€å‘è€…çš„æç¤ºï¼Œè¡¨æ˜åœ¨è¿™ä¸ªä½ç½®å‘ç”Ÿäº†ç‰¹æ®Šçš„è½¬æ¢ã€‚`$` åç¼€çš„å­˜åœ¨æ„å‘³ç€è¿™é‡Œæ˜¯ä¸€ä¸ªæ‡’åŠ è½½è¾¹ç•Œã€‚ä¸ `click` å¤„ç†ç¨‹åºç›¸å…³è”çš„ä»£ç ç›´åˆ°ç”¨æˆ·æ¿€æ´»ç‚¹å‡»äº‹ä»¶ä¹‹å‰ä¸ä¼šè¢«åŠ è½½åˆ° JavaScript è™šæ‹Ÿæœºï¼ˆVMï¼‰ä¸­ã€‚ç„¶è€Œï¼Œä¸ºäº†é¿å…åœ¨ç¬¬ä¸€æ¬¡äº¤äº’æ—¶çš„å»¶è¿Ÿï¼Œå®ƒä¼šè¢«æ€¥åˆ‡åœ°åŠ è½½åˆ°æµè§ˆå™¨ç¼“å­˜ä¸­ã€‚

> åœ¨å®é™…åº”ç”¨ä¸­ï¼Œç›‘å¬å™¨å¯èƒ½ä¼šå¼•ç”¨å¤æ‚çš„ä»£ç ã€‚é€šè¿‡åˆ›å»ºä¸€ä¸ªæ‡’åŠ è½½è¾¹ç•Œï¼ˆå¸¦æœ‰ `$`ï¼‰ï¼ŒQwik å¯ä»¥å¯¹ç‚¹å‡»ç›‘å¬å™¨åé¢çš„æ‰€æœ‰ä»£ç è¿›è¡Œæ‘‡æ ‘ä¼˜åŒ–ï¼Œå¹¶å»¶è¿Ÿå…¶åŠ è½½ç›´åˆ°ç”¨æˆ·ç‚¹å‡»æŒ‰é’®ã€‚

## é‡ç”¨äº‹ä»¶å¤„ç†ç¨‹åº

è¦ä¸ºå¤šä¸ªå…ƒç´ æˆ–äº‹ä»¶é‡ç”¨ç›¸åŒçš„äº‹ä»¶å¤„ç†ç¨‹åºï¼Œä½ å¿…é¡»å°†äº‹ä»¶å¤„ç†ç¨‹åºåŒ…è£…è¿›ç”± `@builder.io/qwik` å¯¼å‡ºçš„ `$()` å‡½æ•°ä¸­ã€‚è¿™ä¼šå°†å…¶è½¬æ¢æˆä¸€ä¸ª [`QRL`](/docs/advanced/qrl/)ã€‚

<CodeSandbox src="/src/routes/demo/events/extracted-handler/index.tsx" style={{ height: '6em' }}>
```tsx {5} /increment/#a
import { component$, useSignal, $ } from '@builder.io/qwik';

export default component$(() => {
  const count = useSignal(0);
  const increment = $(() => count.value++);
  return (
    <>
      <button onClick$={increment}>Increment</button>
      <p>Count: {count.value}</p>
    </>
  );
});
```
</CodeSandbox>


> **æ³¨æ„ï¼š**å¦‚æœä½ æå–äº†äº‹ä»¶å¤„ç†ç¨‹åºï¼Œå¿…é¡»æ‰‹åŠ¨å°†å…¶åŒ…è£…åœ¨ `$(...handler...)` ä¸­ã€‚è¿™ç¡®ä¿äº†å®ƒæ˜¯æ‡’åŠ è½½é™„åŠ çš„ã€‚

## å¤šä¸ªäº‹ä»¶å¤„ç†ç¨‹åº

è¦ä¸ºåŒä¸€ä¸ªäº‹ä»¶æ³¨å†Œå¤šä¸ªäº‹ä»¶å¤„ç†ç¨‹åºï¼Œä½ å¯ä»¥å°†äº‹ä»¶å¤„ç†ç¨‹åºçš„æ•°ç»„ä¼ é€’ç»™ `on{EventName}$` å±æ€§ã€‚

```tsx /onClick$/
import { component$, useSignal, $ } from '@builder.io/qwik';

export default component$(() => {
  const count = useSignal(0);
  const print = $((ev) => console.log('CLICKED!', ev));
  const increment = $(() => count.value++);

  // The button when clicked will print "CLICKED!" to the console, increment the count and send an event to Google Analytics.
  return (
    <button
      onClick$={[print, increment, $(() => {
        ga.send('click', { label: 'increment' });
      })]}
    >
      Count: {count.value}
    </button>
  );
});
```

## äº‹ä»¶å¯¹è±¡

äº‹ä»¶å¤„ç†ç¨‹åºçš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ [`Event`](command:_github.copilot.openSymbolFromReferences?%5B%7B%22%24mid%22%3A1%2C%22path%22%3A%22%2FUsers%2Fotto%2Fmycode%2Fqwik-cn-docs%2Fdocs%2Fsrc%2Froutes%2Fdocs%2F(qwik)%2Fcomponents%2Fevents%2Findex.mdx%22%2C%22scheme%22%3A%22file%22%7D%2C%7B%22line%22%3A113%2C%22character%22%3A0%7D%5D "docs/src/routes/docs/(qwik)/components/events/index.mdx") å¯¹è±¡ã€‚è¿™ä¸ªå¯¹è±¡åŒ…å«äº†è§¦å‘å¤„ç†ç¨‹åºçš„äº‹ä»¶çš„ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼Œ`click` äº‹ä»¶çš„ [`Event`](command:_github.copilot.openSymbolFromReferences?%5B%7B%22%24mid%22%3A1%2C%22path%22%3A%22%2FUsers%2Fotto%2Fmycode%2Fqwik-cn-docs%2Fdocs%2Fsrc%2Froutes%2Fdocs%2F(qwik)%2Fcomponents%2Fevents%2Findex.mdx%22%2C%22scheme%22%3A%22file%22%7D%2C%7B%22line%22%3A113%2C%22character%22%3A0%7D%5D "docs/src/routes/docs/(qwik)/components/events/index.mdx") å¯¹è±¡åŒ…å«äº†é¼ æ ‡ä½ç½®å’Œè¢«ç‚¹å‡»å…ƒç´ çš„ä¿¡æ¯ã€‚ä½ å¯ä»¥æŸ¥çœ‹ [MDN æ–‡æ¡£ä»¥äº†è§£æ¯ä¸ª DOM äº‹ä»¶çš„æ›´å¤šç»†èŠ‚](https://developer.mozilla.org/en-US/docs/Web/API/Event)ã€‚

<CodeSandbox src="/src/routes/demo/events/mouse-position/index.tsx" style={{ height: '6em' }}>
```tsx /event/
import { component$, useSignal } from '@builder.io/qwik';

export default component$(() => {
  const position = useSignal<{ x: number; y: number }>();
  return (
    <div
      onClick$={(event) => (position.value = { x: event.x, y: event.y })}
      style="height: 100vh"
    >
      <p>
        Clicked at: ({position.value?.x}, {position.value?.y})
      </p>
    </div>
  );
});
```
</CodeSandbox>

## å¼‚æ­¥äº‹ä»¶

ç”±äº Qwik çš„å¼‚æ­¥ç‰¹æ€§ï¼Œå¦‚æœå®ç°å°šæœªåŠ è½½åˆ° JavaScript VM ä¸­ï¼Œäº‹ä»¶å¤„ç†ç¨‹åºçš„æ‰§è¡Œå¯èƒ½ä¼šè¢«å»¶è¿Ÿã€‚å› æ­¤ï¼ŒEvent å¯¹è±¡ä¸Šçš„ä»¥ä¸‹ API å°†ä¸èµ·ä½œç”¨ï¼š

- `event.preventDefault()`
- `event.currentTarget`

### é˜»æ­¢é»˜è®¤è¡Œä¸º

å› ä¸ºäº‹ä»¶å¤„ç†æ˜¯å¼‚æ­¥çš„ï¼Œä½ ä¸èƒ½ä½¿ç”¨ `event.preventDefault()`ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒQwik å¼•å…¥äº†ä¸€ç§é€šè¿‡ `preventdefault:{eventName}` å±æ€§æ¥å£°æ˜å¼é˜»æ­¢é»˜è®¤è¡Œä¸ºçš„æ–¹å¼ã€‚

<CodeSandbox src="/src/routes/demo/events/preventdefault/index.tsx" style={{ height: '6em' }}>
```tsx {7}
import { component$ } from '@builder.io/qwik';

export default component$(() => {
  return (
    <a
      href="/docs"
      preventdefault:click // This will prevent the default behavior of the "click" event.
      onClick$={() => {
        // event.PreventDefault() will not work here, because handler is dispatched asynchronously.
        alert('Do something else to simulate navigation...');
      }}
    >
      Go to docs page
    </a>
  );
});
```
</CodeSandbox>

### Event Target

å› ä¸ºäº‹ä»¶å¤„ç†æ˜¯å¼‚æ­¥çš„ï¼Œä½ ä¸èƒ½ä½¿ç”¨ `event.currentTarget`ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒQwik å¤„ç†ç¨‹åºæä¾›äº† `currentTarget` ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ã€‚  

<CodeSandbox src="/src/routes/demo/events/target/index.tsx" style={{ height: '10em' }}>
```tsx /currentTarget/
import { component$, useSignal } from '@builder.io/qwik';

export default component$(() => {
  const currentElm = useSignal<HTMLElement|null>(null);
  const targetElm = useSignal<HTMLElement|null>(null);

  return (
    <section onClick$={(event, currentTarget) => {
      currentElm.value = currentTarget;
      targetElm.value = event.target as HTMLElement;
    }}>
      Click on any text <code>target</code> and <code>currentElm</code> of the event.
      <hr/>
      <p>Hello <b>World</b>!</p>
      <hr/>
      <ul>
        <li>currentElm: {currentElm.value?.tagName}</li>
        <li>target: {targetElm.value?.tagName}</li>
      </ul>
    </section>
  );
});
```
</CodeSandbox>

> **æ³¨æ„ï¼š**DOM ä¸­çš„ `currentTarget` æŒ‡å‘äº‹ä»¶ç›‘å¬å™¨é™„åŠ åˆ°çš„å…ƒç´ ã€‚åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œå®ƒå°†å§‹ç»ˆæ˜¯ `<SECTION>` å…ƒç´ ã€‚

### åŒæ­¥äº‹ä»¶å¤„ç†

åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œéœ€è¦ä¼ ç»Ÿåœ°å¤„ç†äº‹ä»¶ï¼Œå› ä¸ºæŸäº› API éœ€è¦åŒæ­¥ä½¿ç”¨ã€‚ä¾‹å¦‚ï¼Œ`dragstart` äº‹ä»¶å¿…é¡»åŒæ­¥å¤„ç†ï¼Œå› æ­¤å®ƒä¸èƒ½ä¸ Qwik çš„æ‡’ä»£ç æ‰§è¡Œç»“åˆä½¿ç”¨ã€‚

ä¸ºæ­¤ï¼Œä½ å¯ä»¥åˆ©ç”¨ `useVisibleTask` æ¥ä½¿ç”¨ DOM API ç›´æ¥ä»¥ç¼–ç¨‹æ–¹å¼æ·»åŠ äº‹ä»¶ç›‘å¬å™¨ã€‚

<CodeSandbox src="/src/routes/demo/events/synchronous/index.tsx" style={{ height: '10em' }}>
```tsx {7-20}
import { component$, useSignal, useVisibleTask$ } from '@builder.io/qwik';

export default component$(() => {
  const draggableRef = useSignal<HTMLElement>();
  const dragStatus = useSignal('');

  useVisibleTask$(({ cleanup }) => {
    if (draggableRef.value) {
      // Use the DOM API to add an event listener.
      const dragstart = () => (dragStatus.value = 'dragstart');
      const dragend = () => (dragStatus.value = 'dragend');

      draggableRef.value!.addEventListener('dragstart', dragstart);
      draggableRef.value!.addEventListener('dragend', dragend);
      cleanup(() => {
        draggableRef.value!.removeEventListener('dragstart', dragstart);
        draggableRef.value!.removeEventListener('dragend', dragend);
      });
    }
  });

  return (
    <div>
      <div draggable ref={draggableRef}>
        Drag me!
      </div>
      <p>{dragStatus.value}</p>
    </div>
  );
});
```
</CodeSandbox>


> **æ³¨æ„** åœ¨ Qwik ä¸­ä½¿ç”¨ `VisibleTask` æ¥ç›‘å¬äº‹ä»¶æ˜¯ä¸€ç§åæ¨¡å¼ï¼Œå› ä¸ºå®ƒå¯¼è‡´ä»£ç åœ¨æµè§ˆå™¨ä¸­æ€¥åˆ‡æ‰§è¡Œï¼Œä»è€Œç ´åäº†å¯æ¢å¤æ€§ã€‚åªæœ‰åœ¨åˆ«æ— é€‰æ‹©æ—¶æ‰ä½¿ç”¨å®ƒã€‚ä½ åº”è¯¥ä½¿ç”¨ JSX æ¥ç›‘å¬äº‹ä»¶ï¼Œä¾‹å¦‚ï¼š`<div onClick$={...}>`ã€‚æˆ–è€…ï¼Œå¦‚æœä½ éœ€è¦ä»¥ç¼–ç¨‹æ–¹å¼ç›‘å¬äº‹ä»¶ï¼Œè€ƒè™‘ä½¿ç”¨ `useOn(...)` äº‹ä»¶æ–¹æ³•ã€‚

## è‡ªå®šä¹‰äº‹ä»¶å±æ€§

åœ¨åˆ›å»ºç»„ä»¶æ—¶ï¼Œç»å¸¸éœ€è¦ä¼ é€’ç±»ä¼¼äºäº‹ä»¶å¤„ç†ç¨‹åºçš„è‡ªå®šä¹‰äº‹ä»¶å±æ€§ï¼Œå³ä½¿å®ƒä»¬åªæ˜¯å›è°ƒè€Œä¸æ˜¯å®é™…çš„ DOM äº‹ä»¶ã€‚Qwik ä¸­çš„ç»„ä»¶è¾¹ç•Œå¿…é¡»æ˜¯å¯åºåˆ—åŒ–çš„ï¼Œä»¥ä¾¿ä¼˜åŒ–å™¨å°†å®ƒä»¬åˆ†å‰²æˆå•ç‹¬çš„å—ã€‚å‡½æ•°é™¤éè¢«è½¬æ¢ä¸º QRLï¼Œå¦åˆ™ä¸å¯åºåˆ—åŒ–ã€‚

ä¾‹å¦‚ï¼Œç›‘å¬ä¸‰æ¬¡ç‚¹å‡»äº‹ä»¶ï¼Œè¿™æ˜¯ html é»˜è®¤æ— æ³•åšåˆ°çš„ï¼Œå°†éœ€è¦åˆ›å»ºä¸€ä¸ª `onTripleClick$` è‡ªå®šä¹‰äº‹ä»¶å±æ€§ã€‚

<CodeSandbox src="/src/routes/demo/events/custom-event/index.tsx" style={{ height: '10em' }}>
```tsx
import { component$, Slot, useStore } from '@builder.io/qwik';

export default component$(() => {
  return (
    <Button onTripleClick$={() => alert('TRIPLE CLICKED!')}>
      Triple Click me!
    </Button>
  );
});

type ButtonProps = {
  onTripleClick$: QRL<() => void>;
};

export const Button = component$<ButtonProps>(({ onTripleClick$ }) => {
  const state = useStore({
    clicks: 0,
    lastClickTime: 0,
  });
  return (
    <button
      onClick$={() => {
        // triple click logic
        const now = Date.now();
        const timeBetweenClicks = now - state.lastClickTime;
        state.lastClickTime = now;
        if (timeBetweenClicks > 500) {
          state.clicks = 0;
        }
        state.clicks++;
        if (state.clicks === 3) {
          // handle custom event
          onTripleClick$();
          state.clicks = 0;
        }
      }}
    >
      <Slot />
    </button>
  );
});
```
</CodeSandbox>

> æ³¨æ„åœ¨ `onTripleClick$: QRL<() => void>;` ä¸­ä½¿ç”¨äº† `QRL` ç±»å‹ã€‚è¿™å°±åƒåœ¨ç±»å‹çº§åˆ«ä¸Šå°†å‡½æ•°åŒ…è£…åœ¨ `$()` ä¸­ã€‚å¦‚æœä½ æœ‰ `const greet = $(() => "hi ğŸ‘‹");` å¹¶ä¸”æ‚¬åœåœ¨ 'greet' ä¸Šï¼Œä½ ä¼šçœ‹åˆ° 'greet' çš„ç±»å‹æ˜¯ `QRL<() => "hi ğŸ‘‹">`

## çª—å£å’Œæ–‡æ¡£äº‹ä»¶

åˆ°ç›®å‰ä¸ºæ­¢ï¼Œè®¨è®ºä¸»è¦é›†ä¸­åœ¨ç›‘å¬æ¥è‡ªå…ƒç´ çš„äº‹ä»¶ä¸Šã€‚æœ‰ä¸€äº›äº‹ä»¶ï¼Œå¦‚ `scroll` å’Œ `mousemove`ï¼Œéœ€è¦åœ¨ `window` æˆ– `document` ä¸Šç›‘å¬ã€‚Qwik é€šè¿‡æä¾›åœ¨ç›‘å¬äº‹ä»¶æ—¶ä½¿ç”¨çš„ `document:on` å’Œ `window:on` å‰ç¼€æ¥å®ç°è¿™ä¸€ç‚¹ã€‚

`window:on`/`document:` å‰ç¼€ç”¨äºåœ¨ç»„ä»¶çš„å½“å‰ DOM ä½ç½®æ³¨å†Œäº‹ä»¶ï¼ŒåŒæ—¶å…è®¸å®ƒä» `window`/`document` æ¥æ”¶äº‹ä»¶ã€‚è¿™æ ·åšæœ‰ä¸¤ä¸ªä¼˜ç‚¹ï¼š

1. äº‹ä»¶å¯ä»¥åœ¨ JSX ä¸­å£°æ˜å¼æ³¨å†Œã€‚
2. å½“ç»„ä»¶è¢«é”€æ¯æ—¶ï¼Œäº‹ä»¶ä¼šè‡ªåŠ¨æ¸…ç†ï¼ˆä¸éœ€è¦æ˜¾å¼çš„ç°¿è®°å’Œæ¸…ç†ï¼‰ã€‚

## `useOn[window|document]` Hook

- `useOn()`: åœ¨å½“å‰ç»„ä»¶çš„æ ¹å…ƒç´ ä¸Šç›‘å¬äº‹ä»¶ã€‚
- `useOnWindow()`: åœ¨ `window` å¯¹è±¡ä¸Šç›‘å¬äº‹ä»¶ã€‚
- `useOnDocument()`: åœ¨ `document` å¯¹è±¡ä¸Šç›‘å¬äº‹ä»¶ã€‚

`useOn[window|document]()` hook å°†ä»¥ç¼–ç¨‹æ–¹å¼åœ¨ç»„ä»¶çº§åˆ«æ·»åŠ åŸºäº DOM çš„äº‹ä»¶ç›‘å¬å™¨ã€‚å½“ä½ æƒ³åˆ›å»ºè‡ªå·±çš„ä½¿ç”¨é’©å­æˆ–åœ¨ç¼–è¯‘æ—¶ä¸çŸ¥é“äº‹ä»¶åç§°æ—¶ï¼Œè¿™é€šå¸¸å¾ˆæœ‰ç”¨ã€‚

<CodeSandbox src="/src/routes/demo/events/use-on/index.tsx" style={{ height: '10em' }}>
```tsx
import { $, component$, useOnDocument, useStore } from '@builder.io/qwik';

// Assume reusable use method that does not have access to JSX
// but needs to register event handlers.
function useMousePosition() {
  const position = useStore({ x: 0, y: 0 });
  useOnDocument(
    'mousemove',
    $((event) => {
      const { x, y } = event as MouseEvent;
      position.x = x;
      position.y = y;
    })
  );
  return position;
}

export default component$(() => {
  const pos = useMousePosition();
  return (
    <div>
      MousePosition: ({pos.x}, {pos.y})
    </div>
  );
});
```
</CodeSandbox>
