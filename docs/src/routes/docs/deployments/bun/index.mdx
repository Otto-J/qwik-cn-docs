---
title: Bun 中间件 | 部署
contributors:
  - EamonHeffernan
---

# Bun 中间件

Qwik City Bun 中间件允许您将 Qwik City 连接到使用 Bun Http API 的 Bun 服务器。

## 安装

要在 Linux、OSX 或 WSL 上安装 `bun`，请在终端中运行以下命令：

```shell
curl -fsSL https://bun.sh/install | bash 
```

对于其他平台或者如果在安装过程中遇到问题，可以在 [bun 网站](https://bun.sh/docs/installation) 上找到最新的 `bun` 安装说明。

如果在使用 `bun` 作为包管理器时遇到 `Something went wrong installing the "sharp" module` 错误，请将以下代码添加到您的 package.json 中，然后删除 node_modules 文件夹和任何锁文件，如 bun.lockb 或 package-lock.json。然后运行 `bun install`。

```json
"trustedDependencies": [ 
  "sharp"
]
```
此问题目前正在 [bun 仓库](https://github.com/oven-sh/bun/issues/3783) 中跟踪。

要集成 `bun` 适配器，请使用 `add` 命令：

- 对于[集成的 HTTP 服务器](https://bun.sh/docs/api/http)：

```shell
bun run qwik add bun
```

## 生产构建

要为生产环境构建应用程序，请使用 `build` 命令，此命令将自动运行 `bun run build.server` 和 `bun run build.client`：

```shell
bun run build
```

## 启动

在构建完成后启动 Bun 服务器：

```shell
bun run serve
```

## 生产部署

由于您选择了 Bun，在运行 `bun run build` 后，您将独自操作：

- `dist` 文件夹将包含所有静态文件。
- `server` 文件夹将包含所有 bun 服务器文件。
